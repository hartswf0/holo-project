<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grid Thinking Viewer</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'SF Mono',monospace;background:#000;color:#0f0;overflow:hidden;height:100vh;image-rendering:pixelated}@keyframes scanline{0%,100%{transform:translateY(0)}50%{transform:translateY(100vh)}}body::before{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:repeating-linear-gradient(0deg,rgba(0,255,0,0.03) 0px,transparent 1px,transparent 2px,rgba(0,255,0,0.03) 3px);pointer-events:none;z-index:999;animation:scanline 8s linear infinite}body::after{content:'';position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle,transparent 60%,rgba(0,0,0,0.4));pointer-events:none;z-index:998}.viewer-grid{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr 1fr;height:100vh;gap:2px;background:#222}.quadrant{background:#1a1a1a;padding:15px;overflow:auto;position:relative;border:1px solid #333}.quadrant-title{position:sticky;top:0;background:#1a1a1a;padding:8px 0;font-size:11px;font-weight:700;color:#36cfc9;text-transform:uppercase;letter-spacing:1.5px;border-bottom:2px solid #36cfc9;margin-bottom:15px;z-index:10}#grid-view{display:flex;flex-direction:column;align-items:center;gap:15px}.grid-container{display:grid;grid-template-columns:repeat(9,1fr);gap:3px;background:#000;padding:10px;border-radius:4px;width:fit-content;box-shadow:0 0 30px rgba(54,207,201,0.2)}.grid-cell{width:48px;height:48px;background:#001100;border:2px solid #003300;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;color:#0a0;cursor:pointer;transition:all 0.3s cubic-bezier(0.4,0,0.2,1);position:relative;box-shadow:inset 0 0 10px rgba(0,255,0,0.1);font-family:monospace;overflow:hidden}@keyframes pulse-glow{0%,100%{box-shadow:inset 0 0 10px rgba(0,255,0,0.1),0 0 5px rgba(0,255,0,0.2)}50%{box-shadow:inset 0 0 20px rgba(0,255,0,0.3),0 0 15px rgba(0,255,0,0.4)}}.grid-cell::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(0,255,0,0.05) 0%,transparent 50%);pointer-events:none}.grid-cell.occupied{background:#002200;border-color:#0f0;color:#0f0;animation:pulse-glow 2s ease-in-out infinite;box-shadow:inset 0 0 15px rgba(0,255,0,0.2),0 0 10px rgba(0,255,0,0.3)}@keyframes float{0%,100%{transform:translateY(0px)}50%{transform:translateY(-3px)}}.grid-cell.occupied::after{content:attr(data-sprite);position:absolute;font-size:24px;animation:float 2s ease-in-out infinite;filter:drop-shadow(0 0 5px currentColor)}.grid-cell.officer{background:#330000;color:#f00;border-color:#f00;box-shadow:inset 0 0 20px rgba(255,0,0,0.3),0 0 15px rgba(255,0,0,0.5)}@keyframes officer-pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}.grid-cell.officer::after{animation:officer-pulse 1s ease-in-out infinite,float 2s ease-in-out infinite;font-size:28px}.grid-cell.clancy{background:#002200;color:#0ff;border-color:#0ff;box-shadow:inset 0 0 20px rgba(0,255,255,0.3),0 0 15px rgba(0,255,255,0.5)}@keyframes clancy-bob{0%,100%{transform:translateY(0) rotate(-5deg)}50%{transform:translateY(-5px) rotate(5deg)}}.grid-cell.clancy::after{animation:clancy-bob 1.5s ease-in-out infinite;font-size:26px}.grid-cell.scholar{background:#221100;color:#fa0;border-color:#fa0;box-shadow:inset 0 0 20px rgba(255,170,0,0.3),0 0 15px rgba(255,170,0,0.5)}@keyframes scholar-walk{0%,100%{transform:translateX(-2px)}50%{transform:translateX(2px)}}.grid-cell.scholar::after{animation:scholar-walk 0.8s ease-in-out infinite,float 2s ease-in-out infinite;font-size:22px}.grid-cell.apparatus{background:#001133;color:#09f;border-color:#09f;box-shadow:inset 0 0 20px rgba(0,153,255,0.3),0 0 15px rgba(0,153,255,0.5)}@keyframes apparatus-spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.grid-cell.apparatus::after{animation:apparatus-spin 4s linear infinite;font-size:24px}.grid-cell.filing-cabinet{background:#220033;color:#c0f;border-color:#c0f;box-shadow:inset 0 0 20px rgba(204,0,255,0.3),0 0 15px rgba(204,0,255,0.5)}@keyframes cabinet-shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-1px)}75%{transform:translateX(1px)}}.grid-cell.filing-cabinet:hover::after{animation:cabinet-shake 0.3s ease-in-out 3}.grid-cell:hover{transform:scale(1.2);z-index:50;box-shadow:0 0 30px currentColor,inset 0 0 30px currentColor;border-width:3px;filter:brightness(1.5)}.grid-cell:hover::before{background:radial-gradient(circle,currentColor 0%,transparent 70%);opacity:0.3}.grid-cell-coords{position:absolute;top:2px;left:2px;font-size:7px;color:#0a0;opacity:0.4;font-family:monospace;text-shadow:0 0 3px #0f0}#timeline-view{display:flex;flex-direction:column;gap:10px}.timeline-scrubber{width:100%;height:60px;background:#0a0a0a;border-radius:4px;position:relative;cursor:pointer;border:1px solid #333}.timeline-track{position:absolute;height:100%;width:100%;display:flex;padding:5px;gap:2px}.timeline-event{position:absolute;height:calc(100% - 10px);top:5px;border-radius:2px;display:flex;align-items:center;justify-content:center;font-size:8px;font-weight:700;cursor:pointer;transition:all 0.2s;border:1px solid rgba(255,255,255,0.2)}.timeline-event:hover{transform:scaleY(1.2);z-index:5}.timeline-event.thinking_bubble{background:rgba(82,196,26,0.3);border-color:#52c41a}.timeline-event.speech_bubble{background:rgba(24,144,255,0.3);border-color:#1890ff}.timeline-event.move_element{background:rgba(250,173,20,0.3);border-color:#faad14}.timeline-event.visual_effect{background:rgba(255,77,79,0.3);border-color:#ff4d4f}.timeline-event.wait{background:rgba(100,100,100,0.2);border-color:#666}.playhead{position:absolute;top:0;width:2px;height:100%;background:#36cfc9;box-shadow:0 0 10px #36cfc9;pointer-events:none;z-index:10}.event-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:6px}.event-item{background:#0a0a0a;padding:10px;border-radius:3px;border-left:3px solid #36cfc9;font-size:11px;line-height:1.5;transition:all 0.2s;cursor:pointer}.event-item:hover{background:#1a1a1a;border-left-width:5px;transform:translateX(5px)}.event-item.active{background:rgba(54,207,201,0.1);border-left-color:#52c41a}.event-time{color:#36cfc9;font-weight:700;margin-right:8px}.event-type{display:inline-block;padding:2px 6px;border-radius:2px;font-size:9px;font-weight:700;margin-right:6px;text-transform:uppercase}.event-type.thinking_bubble{background:rgba(82,196,26,0.2);color:#52c41a}.event-type.speech_bubble{background:rgba(24,144,255,0.2);color:#1890ff}.event-type.move_element{background:rgba(250,173,20,0.2);color:#faad14}.event-type.visual_effect{background:rgba(255,77,79,0.2);color:#ff4d4f}#power-view{display:flex;flex-direction:column;gap:15px}.power-bar-container{display:flex;flex-direction:column;gap:8px}.power-bar-item{display:flex;flex-direction:column;gap:4px}.power-bar-label{display:flex;justify-content:space-between;font-size:11px;font-weight:700;text-transform:uppercase}.power-bar-track{height:20px;background:#0a0a0a;border-radius:10px;overflow:hidden;position:relative;border:1px solid #333}.power-bar-fill{height:100%;background:linear-gradient(90deg,#36cfc9,#52c41a);transition:width 0.8s cubic-bezier(0.4,0,0.2,1);display:flex;align-items:center;padding:0 10px;font-size:10px;font-weight:700;color:#000;box-shadow:inset 0 0 10px rgba(255,255,255,0.2)}.metadata-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}.metadata-card{background:#0a0a0a;padding:12px;border-radius:3px;border:1px solid #333}.metadata-label{font-size:9px;text-transform:uppercase;color:#666;margin-bottom:5px;letter-spacing:1px}.metadata-value{font-size:14px;font-weight:700;color:#36cfc9}#data-view{display:flex;flex-direction:column;gap:10px}.inspector-section{background:#0a0a0a;padding:12px;border-radius:3px;border:1px solid #333}.inspector-title{font-size:10px;text-transform:uppercase;color:#36cfc9;margin-bottom:8px;letter-spacing:1px;font-weight:700}.json-viewer{font-size:10px;line-height:1.6;overflow-x:auto;max-height:200px;overflow-y:auto;background:#000;padding:10px;border-radius:3px}.json-key{color:#36cfc9}.json-string{color:#52c41a}.json-number{color:#faad14}.json-boolean{color:#ff4d4f}.controls{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(10,10,10,0.95);padding:15px 25px;border-radius:8px;border:2px solid #36cfc9;box-shadow:0 10px 40px rgba(0,0,0,0.8);display:flex;gap:20px;align-items:center;z-index:100;backdrop-filter:blur(10px)}.control-group{display:flex;flex-direction:column;gap:5px}.control-label{font-size:9px;text-transform:uppercase;color:#666;letter-spacing:1px}select,input[type="range"]{background:#1a1a1a;color:#e0e0e0;border:1px solid #333;padding:6px 12px;border-radius:4px;font-size:11px;font-family:inherit;cursor:pointer}select:focus,input:focus{outline:none;border-color:#36cfc9;box-shadow:0 0 10px rgba(54,207,201,0.3)}input[type="range"]{width:200px}.play-button{background:#36cfc9;color:#000;border:none;padding:10px 20px;border-radius:6px;font-weight:700;cursor:pointer;transition:all 0.2s;text-transform:uppercase;font-size:11px;letter-spacing:1px}.play-button:hover{background:#52c41a;transform:scale(1.05)}.play-button.playing{background:#ff4d4f}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:#0a0a0a}::-webkit-scrollbar-thumb{background:#333;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#444}.bubble-overlay{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:50}.bubble{position:absolute;background:rgba(10,10,10,0.95);border:2px solid;border-radius:8px;padding:12px 16px;font-size:12px;line-height:1.5;max-width:250px;box-shadow:0 5px 20px rgba(0,0,0,0.8);animation:bubbleAppear 0.3s cubic-bezier(0.4,0,0.2,1);backdrop-filter:blur(10px)}.bubble.thought{border-color:#52c41a}.bubble.speech{border-color:#1890ff}.bubble-tail{position:absolute;bottom:-8px;left:20px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid}.bubble.thought .bubble-tail{border-top-color:#52c41a}.bubble.speech .bubble-tail{border-top-color:#1890ff}@keyframes bubbleAppear{from{opacity:0;transform:translateY(10px) scale(0.9)}to{opacity:1;transform:translateY(0) scale(1)}}.legend{position:fixed;top:20px;right:20px;background:rgba(10,10,10,0.95);padding:15px;border-radius:6px;border:1px solid #333;font-size:10px;backdrop-filter:blur(10px);z-index:90}.legend-title{font-weight:700;color:#36cfc9;margin-bottom:10px;text-transform:uppercase;letter-spacing:1px}.legend-item{display:flex;align-items:center;gap:8px;margin-bottom:6px}.legend-color{width:16px;height:16px;border-radius:2px;border:1px solid rgba(255,255,255,0.2)}.loading{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);font-size:14px;color:#36cfc9;text-transform:uppercase;letter-spacing:2px;animation:pulse 1.5s ease-in-out infinite;z-index:200}@keyframes pulse{0%,100%{opacity:0.4}50%{opacity:1}}
</style>
</head>
<body>
<div class="loading" id="loading">Loading Grid Data...</div>
<div class="viewer-grid" id="viewer" style="display:none;">
<div class="quadrant" id="grid-view"><div class="quadrant-title">Spatial Grid - Live State</div><div class="grid-container" id="grid-container"></div><div id="scene-info" style="font-size:11px;text-align:center;color:#666;margin-top:10px;"></div></div>
<div class="quadrant" id="timeline-view"><div class="quadrant-title">Timeline - Event Sequence</div><div class="timeline-scrubber" id="timeline-scrubber"><div class="timeline-track" id="timeline-track"></div><div class="playhead" id="playhead"></div></div><div class="event-list" id="event-list"></div></div>
<div class="quadrant" id="power-view"><div class="quadrant-title">Power Distribution</div><div class="power-bar-container" id="power-bars"></div><div class="metadata-grid" id="metadata-grid"></div></div>
<div class="quadrant" id="data-view"><div class="quadrant-title">Data Inspector</div><div id="inspector-content"><div class="inspector-section"><div class="inspector-title">No Element Selected</div><div style="font-size:11px;color:#666;">Click a grid cell or timeline event to inspect</div></div></div></div>
</div>
<div class="controls" id="controls" style="display:none;">
<div class="control-group"><label class="control-label">Scene</label><select id="scene-select"></select></div>
<div class="control-group"><label class="control-label">Time: <span id="time-display">0.0s</span></label><input type="range" id="time-slider" min="0" max="100" value="0" step="0.1"></div>
<button class="play-button" id="play-button">Play</button>
<div class="control-group"><label class="control-label">Speed</label><select id="speed-select"><option value="0.5">0.5x</option><option value="1" selected>1x</option><option value="2">2x</option><option value="4">4x</option></select></div>
</div>
<div class="legend">
<div class="legend-title">Element Types</div>
<div class="legend-item"><div class="legend-color" style="background:#ff4d4f;"></div><div>Officer</div></div>
<div class="legend-item"><div class="legend-color" style="background:#52c41a;"></div><div>Clancy</div></div>
<div class="legend-item"><div class="legend-color" style="background:#faad14;"></div><div>Scholar</div></div>
<div class="legend-item"><div class="legend-color" style="background:#1890ff;"></div><div>Apparatus</div></div>
<div class="legend-item"><div class="legend-color" style="background:#722ed1;"></div><div>Filing Cabinet</div></div>
</div>
<div class="bubble-overlay" id="bubble-overlay"></div>
<script src="viewer-app.js"></script>
</body>
</html>
